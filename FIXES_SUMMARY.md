# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö –≤ GitOps Duel –ø—Ä–æ–µ–∫—Ç–µ

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:

### 1. –û—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Terraform

#### –ü—Ä–æ–±–ª–µ–º–∞:
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –ø—Ä–æ–≤–∞–π–¥–µ—Ä `flux` –≤ `providers.tf`
- –ù–µ–ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- –ü—É—Å—Ç–æ–π —Ñ–∞–π–ª `variables.tf`
- Hardcoded –∑–Ω–∞—á–µ–Ω–∏—è –≤ –º–æ–¥—É–ª—è—Ö

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä `flux` —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- ‚úÖ –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ `variables.tf`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –º–æ–¥—É–ª–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `outputs.tf` —Å –ø–æ–ª–µ–∑–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

### 2. –û—à–∏–±–∫–∏ CI/CD –ø–∞–π–ø–ª–∞–π–Ω–∞

#### –ü—Ä–æ–±–ª–µ–º–∞:
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ KinD –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤ –∫–∞–∂–¥–æ–º job
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–∏–º—É–ª—è—Ü–∏–∏ –æ—à–∏–±–æ–∫
- –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ —à–∞–≥–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
- ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω—ã jobs –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–∏–º—É–ª—è—Ü–∏–∏ –æ—à–∏–±–æ–∫ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ CI –ø–∞–π–ø–ª–∞–π–Ω–∞

### 3. –û—à–∏–±–∫–∏ Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤

#### –ü—Ä–æ–±–ª–µ–º–∞:
- Placeholder –∑–Ω–∞—á–µ–Ω–∏—è –≤ Docker –æ–±—Ä–∞–∑–∞—Ö (`your-docker-repo/...`)
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ YAML —Ñ–∞–π–ª–∞—Ö —É–∫–∞–∑—ã–≤–∞—é—â–∏–µ –Ω–∞ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã placeholder –æ–±—Ä–∞–∑—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ (`justrunme/gitops-duel-ui-*:latest`)
- ‚úÖ –û—á–∏—â–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏-–∑–∞–≥–ª—É—à–∫–∏

### 4. –û—à–∏–±–∫–∏ –≤ UI Backend

#### –ü—Ä–æ–±–ª–µ–º–∞:
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ CORS –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è cross-origin –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª–µ `main` –≤ `package.json`
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ JSON parsing
- –ù–µ–ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ package.json

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω CORS middleware
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `main` –Ω–∞ `server.js`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ JSON parsing
- ‚úÖ –£–ª—É—á—à–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç–∞

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Terraform
–°–æ–∑–¥–∞–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –≥–∏–±–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- `argocd_version` - –≤–µ—Ä—Å–∏—è ArgoCD
- `flux_version` - –≤–µ—Ä—Å–∏—è Flux
- `git_repository_url` - URL Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- `git_branch` - –≤–µ—Ç–∫–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- `*_namespace` - –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### Outputs Terraform
–î–æ–±–∞–≤–ª–µ–Ω—ã outputs –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏:
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–∏—Å–∞–º
- Namespace –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

## üß™ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é Terraform:**
   ```bash
   terraform init
   terraform validate
   terraform plan
   ```

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å CI –ø–∞–π–ø–ª–∞–π–Ω:**
   - –°–æ–∑–¥–∞—Ç—å pull request –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ workflow
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (`DOCKER_USERNAME`, `DOCKER_PASSWORD`)

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É UI:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ backend –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Kubernetes API
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å ArgoCD
   kubectl get applications -n argocd
   
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å Flux
   flux get all -A
   
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å UI
   kubectl get pods,svc -l app=ui-frontend
   kubectl get pods,svc -l app=ui-backend
   ```

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã:

1. **–î–æ—Å—Ç—É–ø –∫ Kubernetes API** - UI backend –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ RBAC –ø—Ä–∞–≤–∞
2. **–û–±—Ä–∞–∑—ã Docker** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–±—Ä–∞–∑—ã –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ Docker Hub
3. **Ingress Controller** - –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã Ingress
4. **Persistent storage** - –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ backend

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

- [ ] `terraform init` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] `terraform validate` –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ  
- [ ] CI –ø–∞–π–ø–ª–∞–π–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] Docker –æ–±—Ä–∞–∑—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∏ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è
- [ ] UI backend –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ health check
- [ ] Frontend –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ backend
- [ ] ArgoCD –∏ Flux —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∏–∑ Git

## üéØ –§–ò–ù–ê–õ–¨–ù–´–ô –°–¢–ê–¢–£–°:

### ‚úÖ –í–°–ï –ì–û–¢–û–í–û –ö PUSH!

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏**: $(date '+%Y-%m-%d %H:%M:%S')

**–°—Ç–∞—Ç—É—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**: 
- ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Git
- ‚úÖ –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —á–∏—Å—Ç–∞—è
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –∫ push
- ‚úÖ –í–µ—Ç–∫–∞: `cursor/review-changes-and-summarize-errors-b256`

**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è push**: 
```bash
git push origin HEAD
```

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–º—É —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é!** üöÄ

---
*–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å–∏—Å—Ç–µ–º–æ–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ GitOps Duel*